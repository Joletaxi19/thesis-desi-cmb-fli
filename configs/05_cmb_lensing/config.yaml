# Field-Level Inference Configuration
# Based on benchmark-field-level paper (arXiv:2409.19049) MCLMC section

# SLURM configuration for NERSC Perlmutter
slurm:
  job_name: fli-mclmc
  account: desi
  qos: regular
  constraint: gpu
  nodes: 1
  gpus: 4  # Use 4 GPUs
  time: "04:00:00"

# Model configuration
model:
  mesh_shape: [64, 64, 64]
  box_shape: [960.0, 960.0, 960.0]  # Mpc/h (Resolution: 15 Mpc/h)
  evolution: lpt
  lpt_order: 2
  a_obs: 0.333
  gxy_density: 0.001

# CMB lensing configuration
cmb_lensing:
  enabled: true
  z_source: 1100.0
  noise_arcmin: 1.0 # Effective noise normalized to 1 arcmin scale

# Truth parameters
truth_params:
  Omega_m: 0.3
  sigma8: 0.8
  b1: 1.5
  b2: 0.0
  bs2: 0.0
  bn2: 0.0

# MCMC configuration
mcmc:
  num_warmup: 2048

  # Sampling
  num_samples: 1024
  num_batches: 40
  num_chains: 4

  save_large_fields: false

  mclmc:
    desired_energy_var: 0.0005
    diagonal_preconditioning: false
    thinning: 1

# Random seed
seed: 42
